<mat-card
  (click)="navigateToTweetPage()"
  *ngIf="tweetAuthorInfo$ | async as user"
  fxLayout="column nowrap"
>
  <div fxLayout="row nowrap" style="width: 100%;">
    <div fxFlex="50px" style="margin-right: 10px;">
      <app-tweet-object-author-picture
        [user]="user"
      ></app-tweet-object-author-picture>
    </div>
    <div fxFill class="tweet-main-body">
      <div fxLayout="row" fxLayoutAlign="start stretch">
        <div style="max-width: 80%;">
          <!-- Image, Display name, Username -->
          <app-tweet-object-header [user]="user"></app-tweet-object-header>
        </div>
        <!-- Created date -->
        <div class="date-separator">
          &#183;
        </div>

        <div>
          <app-tweet-object-created-date
            [tweet]="tweet"
          ></app-tweet-object-created-date>
        </div>
      </div>
      <!-- "Replying to" -->
      <mat-card-subtitle *ngIf="tweet.comment">
        <ng-container
          *ngIf="commentAuthorUsername$ | async as commentAuthorUsername"
        >
          Replying to
          <app-clickable-username
            [username]="commentAuthorUsername"
          ></app-clickable-username>
        </ng-container>
      </mat-card-subtitle>

      <!-- Text -->
      <mat-card-content class="tweet-text">
        {{ tweet.text }}
      </mat-card-content>
      <app-tweet-creation-image-preview
        [imageAsUrl]="tweet.image_url"
      ></app-tweet-creation-image-preview>
      <mat-card-content class="tweet-image"> </mat-card-content>
      <!-- Nested tweet (retweet) -->
      <mat-card-content *ngIf="tweet.retweet && !nested">
        <ng-container *ngIf="nestedTweet$ | async as nestedTweet">
          <app-tweet-object
            [tweet]="nestedTweet"
            [nested]="true"
          ></app-tweet-object>
        </ng-container>
      </mat-card-content>
      <!-- Action buttons -->
      <mat-card-actions class="tweet-actions" *ngIf="!nested">
        <app-tweet-object-actions [tweet]="tweet"></app-tweet-object-actions>
      </mat-card-actions>
    </div>
  </div>
</mat-card>
